<Window x:Class="obhod.SplashWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="obhod" Icon="pack://application:,,,/Resources/icon.ico"
        Height="640" Width="440"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        WindowStartupLocation="CenterScreen" Topmost="True" ShowInTaskbar="True"
        ResizeMode="CanMinimize">

    <Grid Background="Transparent">
        <Border x:Name="MainBorder" CornerRadius="20" BorderThickness="1" Margin="18">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#0D0D12" Offset="0"/>
                    <GradientStop Color="#0A0A10" Offset="0.5"/>
                    <GradientStop Color="#0E0C14" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border.BorderBrush>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#22FFFFFF" Offset="0"/>
                    <GradientStop Color="#0AFFFFFF" Offset="0.5"/>
                    <GradientStop Color="#18FFFFFF" Offset="1"/>
                </LinearGradientBrush>
            </Border.BorderBrush>
            <Border.Effect>
                <DropShadowEffect Color="#000000" BlurRadius="40" ShadowDepth="0" Opacity="0.9"/>
            </Border.Effect>

            <Grid>
                <!-- SVG Shield drawing animation -->
                <Canvas Width="120" Height="140" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,-80,0,0">
                    <!-- Shield outline - draws itself -->
                    <Path x:Name="ShieldPath" 
                          Data="M60,5 L110,30 L110,75 C110,110 60,135 60,135 C60,135 10,110 10,75 L10,30 Z"
                          Stroke="#3B52CC" StrokeThickness="2" Fill="Transparent"
                          StrokeDashArray="500" StrokeDashOffset="500"
                          StrokeLineJoin="Round">
                        <Path.Effect>
                            <DropShadowEffect Color="#5C7CFF" BlurRadius="8" ShadowDepth="0" Opacity="0.4"/>
                        </Path.Effect>
                    </Path>

                    <!-- Inner shield fill (fades in after draw) -->
                    <Path x:Name="ShieldFill"
                          Data="M60,12 L105,34 L105,75 C105,106 60,128 60,128 C60,128 15,106 15,75 L15,34 Z"
                          Fill="#08FFFFFF" Opacity="0"/>

                    <!-- Checkmark inside shield - draws after shield -->
                    <Path x:Name="CheckPath"
                          Data="M38,72 L52,86 L82,52"
                          Stroke="White" StrokeThickness="3" Fill="Transparent"
                          StrokeDashArray="200" StrokeDashOffset="200"
                          StrokeStartLineCap="Round" StrokeEndLineCap="Round" StrokeLineJoin="Round"
                          Opacity="0">
                        <Path.Effect>
                            <DropShadowEffect Color="#5C7CFF" BlurRadius="6" ShadowDepth="0" Opacity="0.3"/>
                        </Path.Effect>
                    </Path>
                </Canvas>

                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,100,0,0">
                    <!-- Title -->
                    <TextBlock x:Name="TitleText" Text="obhod" FontSize="28" FontWeight="Bold" 
                               Foreground="#E0E0F0" HorizontalAlignment="Center" 
                               FontFamily="Segoe UI Variable,Segoe UI" Opacity="0"/>

                    <!-- Version badge -->
                    <Border x:Name="VersionBadge" CornerRadius="4" Background="#08FFFFFF" BorderBrush="#10FFFFFF" 
                            BorderThickness="1" Padding="8,2" Margin="0,8,0,0" HorizontalAlignment="Center" Opacity="0">
                        <TextBlock Text="v1.2 · premium bypass" FontSize="10" Foreground="#30FFFFFF" 
                                   FontWeight="Medium" FontFamily="Segoe UI Variable,Segoe UI"/>
                    </Border>

                    <!-- Minimal spinning ring loader -->
                    <Grid Width="20" Height="20" Margin="0,30,0,0" HorizontalAlignment="Center">
                        <Ellipse Width="20" Height="20" Stroke="#10FFFFFF" StrokeThickness="2" Fill="Transparent"/>
                        <Path x:Name="Spinner" Data="M10,0 A10,10 0 0,1 20,10" 
                              Stroke="#3B52CC" StrokeThickness="2" StrokeStartLineCap="Round" StrokeEndLineCap="Round"
                              RenderTransformOrigin="0.5,0.5">
                            <Path.RenderTransform>
                                <RotateTransform x:Name="SpinnerRotate" Angle="0"/>
                            </Path.RenderTransform>
                        </Path>
                    </Grid>

                    <TextBlock x:Name="StatusText" Text="Инициализация..." FontSize="10" Foreground="#20FFFFFF" 
                               FontWeight="Medium" HorizontalAlignment="Center" Margin="0,10,0,0" 
                               FontFamily="Segoe UI Variable,Segoe UI" Opacity="0"/>
                </StackPanel>

                <!-- Bottom -->
                <TextBlock x:Name="BottomText" Text="zapret engine · open source" Foreground="#10FFFFFF" FontSize="10" 
                           FontFamily="Segoe UI Variable,Segoe UI" VerticalAlignment="Bottom" HorizontalAlignment="Center" 
                           Margin="0,0,0,18" Opacity="0"/>
            </Grid>
        </Border>
    </Grid>

    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <!-- Window fade in + slide -->
                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.5">
                        <DoubleAnimation.EasingFunction><CubicEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction>
                    </DoubleAnimation>
                    <ThicknessAnimation Storyboard.TargetName="MainBorder" Storyboard.TargetProperty="Margin" 
                                        From="18,40,18,0" To="18,18,18,18" Duration="0:0:0.7">
                        <ThicknessAnimation.EasingFunction><CubicEase EasingMode="EaseOut"/></ThicknessAnimation.EasingFunction>
                    </ThicknessAnimation>

                    <!-- Shield draws itself (0.3s → 1.3s) -->
                    <DoubleAnimation Storyboard.TargetName="ShieldPath" Storyboard.TargetProperty="StrokeDashOffset"
                                     From="500" To="0" BeginTime="0:0:0.3" Duration="0:0:1">
                        <DoubleAnimation.EasingFunction><CubicEase EasingMode="EaseInOut"/></DoubleAnimation.EasingFunction>
                    </DoubleAnimation>

                    <!-- Shield fill fades in -->
                    <DoubleAnimation Storyboard.TargetName="ShieldFill" Storyboard.TargetProperty="Opacity"
                                     From="0" To="1" BeginTime="0:0:1" Duration="0:0:0.4"/>

                    <!-- Checkmark appears and draws -->
                    <DoubleAnimation Storyboard.TargetName="CheckPath" Storyboard.TargetProperty="Opacity"
                                     From="0" To="1" BeginTime="0:0:1.4" Duration="0:0:0.1"/>
                    <DoubleAnimation Storyboard.TargetName="CheckPath" Storyboard.TargetProperty="StrokeDashOffset"
                                     From="200" To="0" BeginTime="0:0:1.4" Duration="0:0:0.5">
                        <DoubleAnimation.EasingFunction><CubicEase EasingMode="EaseOut"/></DoubleAnimation.EasingFunction>
                    </DoubleAnimation>

                    <!-- Title fades in -->
                    <DoubleAnimation Storyboard.TargetName="TitleText" Storyboard.TargetProperty="Opacity"
                                     From="0" To="1" BeginTime="0:0:1.6" Duration="0:0:0.4"/>

                    <!-- Version badge -->
                    <DoubleAnimation Storyboard.TargetName="VersionBadge" Storyboard.TargetProperty="Opacity"
                                     From="0" To="1" BeginTime="0:0:1.8" Duration="0:0:0.3"/>

                    <!-- Spinner rotation (continuous) -->
                    <DoubleAnimation Storyboard.TargetName="SpinnerRotate" Storyboard.TargetProperty="Angle"
                                     From="0" To="360" BeginTime="0:0:2" Duration="0:0:0.8" RepeatBehavior="Forever"/>

                    <!-- Status text -->
                    <DoubleAnimation Storyboard.TargetName="StatusText" Storyboard.TargetProperty="Opacity"
                                     From="0" To="1" BeginTime="0:0:2" Duration="0:0:0.3"/>

                    <!-- Bottom text -->
                    <DoubleAnimation Storyboard.TargetName="BottomText" Storyboard.TargetProperty="Opacity"
                                     From="0" To="1" BeginTime="0:0:2.2" Duration="0:0:0.5"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Window.Triggers>
</Window>
